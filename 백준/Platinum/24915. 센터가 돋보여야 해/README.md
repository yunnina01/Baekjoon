# [Platinum I] 센터가 돋보여야 해 - 24915 

[문제 링크](https://www.acmicpc.net/problem/24915) 

### 성능 요약

메모리: 332368 KB, 시간: 1428 ms

### 분류

자료 구조, 세그먼트 트리

### 제출 일자

2025년 1월 19일 09:59:11

### 문제 설명

<p>나코더 39기 부원인 정후는 2022년 솔대제에 나코더의 무대를 선보이려고 한다. 무대의 이름은 '수열과 쿼리 333'으로, 1 번부터 <em>N</em> 번까지 일렬로 서 있는 학생들이 정후가 만든 <em>Q </em>가지 동작을 보여 줄 것이다. 각 동작은 두 종류 중 하나이고, 각 학생은 하나의 정수로 나타내어지는 <strong>매력</strong>을 가지고 있다.</p>

<ul>
	<li>첫 번째 종류의 동작은 <em>x<sub>i</sub></em>번 학생의 매력을 <em>y<sub>i</sub></em>로 바꾼다.</li>
	<li>두 번째 종류의 동작은 <em>l<sub>i</sub></em>번 학생과 <em>r<sub>i</sub></em>번 학생 사이에서 서로 다른 학생 세 명이 나와 무대를 펼친다. 즉, <em>l<sub>i</sub></em> ≤ <em>a</em> < <em>b</em> < <em>c</em> ≤ <em>r<sub>i</sub></em>일 때 <em>a</em> 번, <em>b</em> 번, <em>c</em> 번 학생이 나와 주어진 동작을 마친다.</li>
</ul>

<p>센터가 가진 매력이 독보적일수록 <strong>무대의 매력</strong>이 증가한다. <em>i</em>번 학생이 가진 매력을 <em>A<sub>i</sub></em>라고 말할 때 <strong>무대의 매력</strong>을 <em>A<sub>b</sub></em> - <em>A<sub>a</sub></em><sub> </sub>- <em>A<sub>c</sub></em>로 계산한다.</p>

<p>정후는 열심히 준비한 만큼 완벽한 무대가 되기를 바란다. 정후를 위해 각 동작마다 세 명을 골라 <strong>무대의 매력</strong>의 최댓값을 알려 주자.</p>

### 입력 

 <p>첫째 줄에 학생의 수를 나타내는 정수 <em>N</em>과 동작의 수를 나타내는 정수 <em>Q</em>가 공백으로 구분되어 주어진다. 둘째 줄에 <em>N</em> 개의 정수가 공백으로 구분되어 주어진다. <em>i </em>번째로 주어지는 수는 <em>i </em>번 학생의 매력 <em>A<sub>i</sub></em>를 나타낸다. 셋째 줄부터 <em>Q</em> + 2째 줄까지 동작의 정보를 나타내는 세 정수가 공백으로 구분되어 주어진다. 각 행의 첫 번째 수는 동작의 종류를 의미한다. 첫 번째 종류의 동작에서는 이어 <em>x<sub>i</sub></em>와 <em>y<sub>i</sub></em>가 주어지고, 두 번째 종류의 동작에서는 이어 <em>l<sub>i</sub></em>와 <em>r<sub>i</sub></em>가 주어진다.</p>

### 출력 

 <p>두 번째 종류의 동작이 주어질 때마다 <strong>무대의 매력</strong>의 최댓값을 한 줄에 하나씩 출력한다.</p>

